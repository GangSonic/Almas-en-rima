<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Exportación Altar</title>
    <style>
        .test-altar {
            width: 600px;
            height: 400px;
            background: linear-gradient(to bottom, rgb(139, 69, 19), rgb(101, 67, 33), rgb(62, 39, 35));
            border-radius: 12px;
            padding: 20px;
            margin: 20px;
            position: relative;
        }
        .test-elemento {
            width: 64px;
            height: 64px;
            background: linear-gradient(135deg, #fb923c, #ea580c);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            margin: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
    </style>
</head>
<body>
    <h1>Test de Exportación de Altar</h1>
    <div id="test-altar" class="test-altar" data-altar="zona">
        <h2 style="color: #fbbf24; text-align: center;">🏛️ Altar de Prueba 🏛️</h2>
        <div style="display: flex; gap: 10px; justify-content: center;">
            <div class="test-elemento">🕯️</div>
            <div class="test-elemento">🌼</div>
            <div class="test-elemento">💀</div>
            <div class="test-elemento">🍞</div>
        </div>
    </div>
    
    <button onclick="exportarTest()" style="padding: 10px 20px; font-size: 16px; margin: 20px;">
        🖼️ Exportar Test PNG
    </button>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script>
        async function exportarTest() {
            try {
                const elemento = document.querySelector('[data-altar="zona"]');
                const canvas = await html2canvas(elemento, {
                    backgroundColor: '#8b4513',
                    scale: 2,
                    logging: false,
                    useCORS: true,
                    allowTaint: true,
                    foreignObjectRendering: false
                });

                const link = document.createElement('a');
                link.download = 'altar-test.png';
                link.href = canvas.toDataURL('image/png', 1.0);
                link.click();
                
                console.log('✅ Exportación exitosa');
            } catch (error) {
                console.error('❌ Error en exportación:', error);
                alert('Error: ' + error.message);
            }
        }
    </script>
</body>
</html>